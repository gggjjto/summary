# Python 学习(更新中)

> 时间：2023/1/6

## python 语法基础

### <u>python的特点</u>

> 简单易学，面向对象，解释性，免费开源，可移植性，胶水语言，丰富的库，规范代码，支持函数式编程，动态类型。

> 解释性：python不编译成二进制代码，python解释器把源代码转化成中间字节码形式。

#### 第一个代码

```python
>>> print("Hello World.")
Hello World.
# print 的解释：
#  print("*objects,sep=' ',end='\n',file=sys.stdout,flush=False")
#  *objects 可变长度的对象参数
#  sep 分隔符参数，默认值一个空格
#  end 输出字符串的结束符号，默认值是换行符
#  file 输出文件的参数，默认值sys.stdout标准输出（控制台）
#  flush 是否刷新文件输出缓存区
>>> print(f'{i}*{j}={i*j}')
```

#### 命名规则（与c的差不多）

#### 常量

**没有常量的类型，只有变量类型**（区分靠程序员自查或者其他技术手段）

#### 注释

~~~python
# 在注释开头，#后面有一个空格
~~~

- 文件注释
- 文档注释
- 代码注释
- `TODO`注释：表示有待处理的任务或代码没有编写完

#### 模块

**就是文件，保存代码的最小单位（模块事实上提供一种命名空间（`namespace`））**

> - `import<模块名>`，导入模块中**所有的代码元素**
> - `from<模块名>import<代码元素>`，导入**特定的代码元素**

#### 包

**：在两个模块的名字相同时，其中一个可以使用包，避免命名冲突**

> 包中有一个``_init.py``文件，解释这是一个包
>
> 包导入同样使用`import`，在**需要导入的模块名前加上包名**

#### 命名规范

> - 模块名：**名词**或者**名词短语**，全部**小写**，多个单词时**下划线隔开** 
> - 类名： 采用**大驼峰法命名**（单词的首字母大写）
> - 异常名： **异常属于类**，命名同类命名，**使用``Error ``作后缀**
> - 变量名：全部小写字母，多个单词用下划线隔开
>   1. 应用于模块或函数内部，**单下划线开头**
>   2. 变量类内部私有使用变量可以用**双下划线开头**，但不要用双下划线结尾，这是python保留的
>   3. 避免L，O，I 作变量
> - 函数名和方法名：**动词和动词短语**，命名同变量命名
> - 常量名：**全部大写字母**，多个单词用下划线隔开

#### 导入规范

> **位于模板注释和文档注释之后，模块全局变量和常量之前**，每个导入句导入一个模块

#### 代码排版

> - 空行
>   1. **`import`，函数，类，方法 前两个空行**
>   2. **两个逻辑代码块保留一个空行**
> - 空格
>   1. **' = ' 前后各有一个空格**
>   2. **所有的二元运算符都使用空格与操作数隔开**
>   3. **一元运算符包括 ' - ' , ' ~ '前使用空格隔开**
>   4. **括号内不要有空格**
>   5. **不要在逗号，分号，冒号前有空格**，在它们后面有一个空格，除非已经结尾
> - 缩进
>   - 代码块的内容**相当于缩进一个级别**（4个空格）
> - 断行（一行代码最多72个字符）
>   1. **在逗号后面，运算符前面断开**
>   2. **尽量不要使用续断符 " \ ",可以在括号中隔开**



### <u>数据类型</u>

#### 数字类型

##### 整数类型，浮点类型，复数类型，布尔类型

#### 数字类型互相转换

##### 隐式类型转换

>  `type()` 函数可以返回传入数据的类型。

##### 显示类型转换

> 使用`int(),float(),bool()`进行强制转换。

#### 字符串（`str`）

##### 表示方式

- 普通字符串：**采用单引号或双引号包裹起来的字符串**

- 原始字符串（`rwa string`）:在普通字符串前加`r`,**展示字符串的原本面目**
- 长字符串：字符串中包含了换行缩进等排版字符，用"` '''`"三重单引号," ` """` "三重双引号包裹起来

##### 字符串格式化

- 使用` format()`方法及占位符

  ```python
  age=18
  s='今年你{0}岁'.format(age)        #今年你18岁
  s_1='今年你{0:5d}岁'.format(age)   #今年你   18岁
  ```

  | 控制符 |         说明         |
  | :----: | :------------------: |
  |   s    |     字符串格式化     |
  |   d    |      十进制整数      |
  |  f，F  |     十进制浮点数     |
  |  g，G  |  十进制整数或浮点数  |
  |  e，E  | 科学计数法表示浮点数 |
  |   o    |      八进制整数      |
  |  x，X  |     十六进制整数     |

##### 字符串查找

> **` str.find(sub[,start[,end]])` ：在`start`和`end`之间查找字符串`sub`，返回最左端位置的索引**
>
> **`str.find(sub[,start[,end]])` : 和find差不多，返回最右端位置的索引**
>
> **`str.find(sub)`:找到返回0，反之返回-1**

##### 字符串与数字互相转换

> 使用`int(),float(),str()`





#### 运算符

##### **一元运算符，二元运算符，关系运算符，逻辑运算符，位运算符，赋值运算符**

- **同`c`一样**

##### 其他运算符

###### 同一性测试运算符

`is`和`is not`是否是同一对象（类似"`==`"和"`!=`"，**不同的是可以比较方法和类**)

###### 成员测试运算符

`in`和`not in`是测试是否包含某一元素

#### 运算符优先级

建议直接使用括号

### 控制语句

#### 分支语句

##### `if`结构

同`c`类似，没有括号

```python
if score>98    #score是否大于98
#基本语法
#if 条件 ：
#    语句组
```

##### `if-else`结构

```python
if 条件 ：
	语句组
else ：
	语句组
```

##### `elif`结构

```python
if 条件1 ：
	语句组1
elif 条件2 ：
	语句组2
elif 条件3 ：
	语句组3
	...
elif 条件n ：
	语句组 n
else ：
	语句组n+1
```

##### 三目运算符的代替品——条件表达式

```python
表达式1 if 条件 else 表达式2
```

#### 循环语句

##### `while`语句

```python
while 循环条件 ：
	语句组
[else :
	语句组]
```

##### `for`语句

```python
for 迭代变量 in 序列 ：#在最后加上：
	语句组
[else :
	语句组]
```

#### 跳转语句

##### `break`语句

同`c/c++`

##### continue语句

同`c/c++`

##### while和for中的else语句

**当遇到`break`，`return`和异常抛出不执行else中的语句组，没有遇到时执行`else`中的语句组**

#### 使用范围

`range()`函数

```python
range([start,]stop[,step])
#start是开始值，默认是0，stop是结束值，step是步长
```

## python 编程进阶

### 序列

#### 序列概述

​	序列是一种可迭代的，元素有序，可以重复出现的数据结构。（第一个元素索引是0）

包括列表，字符串（`str`），元组（tuple），范围（range），字节序列（bytes），可以进行索引，切片，加，乘。

#### 索引操作

​	`a[index]`,`index`是序列a的索引，超出索引引发`indexError`错误，经常使用的函数`len()`返回序列大小,`max()`返回序列中ASCII最大的字符,`min()`,`ord()`返回序列字符的ASCII码。

#### 序列的加和乘

```python
>>>a = 'Hello'
>>>a * 3
'HelloHelloHello'
>>>a+'cc'
'Hellocc'
```

#### 序列切片

- `[start,end]`:`start`是开始索引，`end`是结束索引。
- `[start,end,step]`：`step`是步长，步长是在切片时获取元素的间隔。（下次元素的索引=当次元素的索引+步长）

```python
>>>a[1,3]
'el'
>>>a[::-1]
'olleH'
```

### 元组

​	一种序列结构，一种不可变序列，一但创建就不能修改。

#### 创建元组

1. 使用`,`分隔元素,代表是（）小括号。
2. `tuple([iterable])`函数，`iterable`是可迭代对象，`tuple()`创建元组。

```python
>>>21,32,34
(21,32,34)
>>>tuple([1,2,3])
(1,2,3)
#注意的操作
>>>a=(21)
>>>type(a)
<class'int'>
>>>a=(21,)
>>>type(a)
<class'tuple'>
>>>a=()
>>>type(a)
<class'tuple'>
```

#### 访问元组

​	通过下标索引，和切片访问

还可以进行拆包（`unpack`）操作

```python
>>> a=(1,2,3,4,5,6)
>>> n1,n2,n3,*n4=a
>>> n1
1
>>> n4
[4, 5, 6]
```

#### 遍历元组

用`for`和`enumerate()`

`eumerate(a)`：获取元组对象，有两个元素，第一个是索引，第二个是数值。

```python
a=[1,2,3,4]
for i in a
	print(i);
```

### 列表

​	序列结构，具有可变性，可以追加，插入，删除，替换

#### 列表创建

​	代表是`[]`中括号

​	`list[iteradle]`

```python
>>> a=list((1,2,3,4))
>>> a
[1, 2, 3, 4]
>>> type(a)
<class 'list'>
>>> [1,2,3,4,5]
[1, 2, 3, 4, 5]
```

#### 追加元素

使用`append()`, 还可以使用`+`运算符和`extend()`

`list.append()`只能追加一个元素,`list.extend()`可以追加多个元素

```python
>>> a=[1,2,3]
>>> a.append([4,5])
>>> a
[1, 2, 3, [4, 5]]
>>> a.append((6,7))
>>> a
[1, 2, 3, [4, 5], (6, 7)]
>>> a.append(8)
>>> a
[1, 2, 3, [4, 5], (6, 7), 8]
>>> a.extend((9,10))
>>> a
[1, 2, 3, [4, 5], (6, 7), 8, 9, 10]
>>> a.extend([11,12])
>>> a
[1, 2, 3, [4, 5], (6, 7), 8, 9, 10, 11, 12]
>>> a+=[13,14]
>>> a
[1, 2, 3, [4, 5], (6, 7), 8, 9, 10, 11, 12, 13, 14]
>>> a+=(15,)
>>> a
[1, 2, 3, [4, 5], (6, 7), 8, 9, 10, 11, 12, 13, 14, 15]
>>> a+=[16]
>>> a
[1, 2, 3, [4, 5], (6, 7), 8, 9, 10, 11, 12, 13, 14, 15, 16]
```

#### 插入元素

`list.insert(i,x)`:`i`是要插入的位置，`x`是要插入的值。

#### 替换元素

直接使用`=`进行赋值即可，例如：`a[i]=x`

#### 删除元素

1. `list.remove(x)`方法，左到右匹配删除，多个元素删除第一个元素，没找到抛出异常。`x`是要删除的元素。
2. `list.pop([i])`方法，`i`是指定删除元素的索引，`i`可以省略，删除最后一个元素。

#### 其他常用方法

- `reverse()`：倒置列表
- `copy()`：复制列表
- `clear()`：清除列表中的所有元素
- `index(,i[,j])`：返回查找`x`第一次出现的索引，`i`是开始查找的索引，`j`是结束查找的索引，继承自序列。

### 列表推导式

```python
n_list=[x**2 for i in rang(10) if x%2 == 0]
	#输出表达式 语句
print(n_list) 
#0,4,16,36,64
```

### 集合

可迭代，无序的，不能包括重复元素

#### 可变集合

可以修改，插入，删除

##### 创建可变集合

1. 使用`{}`将元素括起来。
2. `set([iterable])`函数。

```python
>>> a={1,2,3,1,2}
>>> a
{1, 2, 3}
>>> a=set((1,2,3,4,5,6,1,2,3))
>>> a
{1, 2, 3, 4, 5, 6}
>>> a=set([1,2,3,4,1,2])
>>> a
{1, 2, 3, 4}
#会剔除重复元素
```

##### 修改可变集合

- `add(x)`，添加元素x。
- `remove(x)`,删除元素x，不存在**会抛出异常**。
- `discard(elem)`，删除元素elem，不存在**不会抛出异常**
- `pop()`,删除返回集合中的任意一个元素，返回值是删除的元素。
- `clear()`清空集合。

##### 遍历集合

用`for`或者`enumerate()`

#### 不可变集合

`frozenset`，使用`frozenset([iterable])`创建，不能使用`{}`.

#### 集合推导式

类似列表推导式，区别是过滤掉重复元素。

### 字典

可迭代，可变，通过键访问元素

#### 创建字典

1. 使用`{}`包裹键值对创建字典。
2. `dict()`函数创建字典。
   - `dict(d)`，d是其他字典对象
   - `dict([itreradle])`，可以是可迭代的对象

```python
>>> a={1:'as',2:'asa',3:'pp'}
>>> a
{1: 'as', 2: 'asa', 3: 'pp'}
>>> a=dict(((1, 223),(2, 112)))
>>> a
{1: 223, 2: 112}
>>> dict({1:223,2:121})
{1: 223, 2: 121}
```

#### 修改字典

添加，删除，替换类似元组

`popitem()`：删除任意键值对

#### 访问字典

- `get(key[,default])`，通过键返回值，键不存在返回默认值。
- `items()`返回字典所有键值对。
- `keys()`返回字典键的视图。
- `values()`返回字典值的视图。

```python
>>> a.get(1)
223
>>> a.items()
dict_items([(1, 223), (2, 112)])
>>> a.keys()
dict_keys([1, 2])
>>> a.values()
dict_values([223, 112])
```

#### 遍历字典

通过`for`

#### 字典推导式

` output_dict={k:v for k,v in input_dict.items() if v%2==0}`

### 函数与函数式编程

封装一个代码块

#### 定义函数

​	python官方会提供内置函数

```python
#语法
def 函数名 （参数列表） ：
	函数体
	return 返回值
```

#### 函数参数

##### 使用关键字参数调用函数

```print_data(width=320,height=480)#```，清晰，有序

##### 参数默认值

在定义函数时可以为参数设置一个默认值，调用函数时可以忽略该参数。

```python
def make_coffee(name='卡布奇洛')
	return "制作一杯{0}咖啡".format(name)
```

##### 单星号（*）可变参数

两种可变参数单星号（*），双星号（**）

- 单星号可变参数在函数中被组装成一个元组。
- 双星号可变参数在函数中被组装成一个字典。

#### 函数返回值

##### 无返回值函数

`return None`,`return `

##### 多个返回值函数

使用元组实现，因为元组作为数据结构可以容纳多个数据，另外元组是不可变的。

```python
def position(dt,speed)
	posx=speed[0]*dt
	posy=speed[1]*dt
	return (posx,posy)
```

#### 函数变量作用域

全局变量，局部变量。

#### 生成器

使用`yield`返回可迭代对象，可迭代对象可以使用` __next__()`方法获得元素

```python
def square_1(num):
	n_list=[]
	for i in range(1,num+1):
		n_list.append(i*i)
	return n_list

def square_2(num):
    
	for i in range(1,num+1):
		yield i*i
```

### 嵌套函数

嵌套在函数里的函数。

### 函数式编程基础

#### 高价函数与函数类型

一个函数可以作为其他函数的参数，或者其他函数的返回值，那么这个函数是高阶函数

`function`函数类型

#### 函数作为其他函数的返回值使用

可以把函数的返回值作为函数的返回值使用，高级函数。

#### 函数作为其他函数的参数使用

作为高阶函数还可以作为其他函数参数使用。

#### 匿名函数与`lambda`表达式

不需要名字的函数。

` lamdba 参数列表 : lambda体`，`lambda`体只能有一条语句。

### 函数式编程的三大基础函数

过滤，映射，聚合：`filter(),map(),reduce()`

#### 过滤函数` filter()`

可以对可迭代对象的元素进行过滤

`filter(function,iterable)`，在`function`中编写过滤条件，如果是`True`元素保留，`False`时元素被过滤掉。返回元组。

#### 映射函数`map()`

`map(function,iterable)`，`iterable`会被遍历，它的元素被逐一传入`function`，在`function`中对元素进行变换。

#### 聚合函数`reduce()`

`reduce(function,iterable,[,initializer])`按指定算法积累叠加起来，最后输出一个数据。

### 装饰器

 在不修改函数代码的情况下，给函数添加一些功能

### 正则表达式

#### 正则表达式中的字符

##### 元字符

| 字符 |                   说明                   |
| :--: | :--------------------------------------: |
| `\`  |             转义符，表示转义             |
| `.`  |             表示任意一个字符             |
| `+`  |            表示重复一次或多次            |
| `*`  |            表示重复零次或多次            |
| `?`  |            表示重复零次或一次            |
| `|`  | 选择符号，表示”或关系"，A\|B表示匹配A或B |
| `{}` |                 定义量词                 |
| `[]` |                定义字符类                |
| `()` |                 定义分组                 |
| `^`  |        表示取反，或匹配一行的开始        |
| `$`  |              匹配一行的结束              |

##### 字符转义

可以对普通字符进行转义，也可以对基本字符进行转义。

##### 开始与结束字符

 基本元字符`^`和`$`，分别表示匹配的开始和结束。

#### 字符类

##### 定义字符类

使用`[]`

### 网络爬虫技术基础

python社区有一个框架是`Scrapy`

1. 爬取数据
   - 使用`urllib`爬取数据（常被服务器拦截），可以使用Selenium操控浏览器访问，
2. 解析数据
   - 使用正则表达式（有时难以编写），使用BeautifulSoup库。
